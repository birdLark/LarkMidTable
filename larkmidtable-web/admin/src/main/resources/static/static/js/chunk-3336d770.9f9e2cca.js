(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3336d770"],{"119b":function(t,a,e){"use strict";e("62e3")},"5a1c":function(t,a,e){"use strict";e("d010a")},"62e3":function(t,a,e){},"6c35":function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"dev-sql"},[t.sqlDataList?e("div",{staticClass:"nav-bar"},[e("div",{staticClass:"search"},[e("el-input",{attrs:{size:"small","prefix-icon":"el-icon-search",placeholder:"请输入查询关键字"},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.handleSearch(a)}},model:{value:t.searchInput,callback:function(a){t.searchInput=a},expression:"searchInput"}}),e("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"small"},on:{click:t.handleSearch}},[t._v(" 查询 ")])],1),e("ul",t._l(t.sqlDataList,(function(a,n){return e("li",{key:"sql-data-list-"+n,class:{"cur-li":t.curData&&t.curData.id===a.id},on:{click:function(e){return t.setCurData(a)}}},[e("div",{staticClass:"icon-name"},[e("span",{staticClass:"icon"},[t._v(t._s(a.tasktype))]),e("span",{staticStyle:{"margin-left":"5px"}},[t._v(t._s(a.name))])]),e("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"text"},on:{click:function(e){return e.stopPropagation(),t.handleUpdate(a)}}},[t._v(" 编辑 ")])],1)})),0)]):t._e(),e("div",{staticClass:"app-main"},[e("div",{staticClass:"buttons"},[e("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.handleAdd}},[t._v("新建")]),e("el-button",{attrs:{type:"primary",size:"small",disabled:!t.curData},on:{click:t.executeData}},[t._v("运行")]),e("el-button",{attrs:{type:"primary",size:"small",disabled:!t.curData},on:{click:function(){t.curData.sql_text=t.sqlText,t.updateData(t.curData)}}},[t._v(" 保存 ")])],1),t.curData?e("div",{staticClass:"editor"},[e("el-input",{attrs:{type:"textarea",autosize:{minRows:15,maxRows:30},placeholder:"请输入内容"},model:{value:t.sqlText,callback:function(a){t.sqlText=a},expression:"sqlText"}}),e("div",{staticClass:"result",domProps:{innerHTML:t._s(t.jsonResult)}})],1):t._e()]),e("InfoDialog",{ref:"InfoDialog"})],1)},s=[],l=(e("e9c4"),function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("el-dialog",{ref:"InfoDialog",attrs:{visible:t.dialogShow,title:t.infoTitle,width:"600px","append-to-body":""},on:{"update:visible":function(a){t.dialogShow=a},close:t.close}},[e("el-form",{ref:"infoDialogForm",attrs:{model:t.formData,rules:t.rules,size:"medium","label-width":"100px"}},[e("el-row",{attrs:{gutter:24}},[e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"任务名称",prop:"name"}},[e("el-input",{attrs:{clearable:!0,placeholder:"请输入"},model:{value:t.formData.name,callback:function(a){t.$set(t.formData,"name","string"===typeof a?a.trim():a)},expression:"formData.name"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"任务类型",prop:"tasktype"}},[e("el-select",{attrs:{placeholder:"请选择"},model:{value:t.formData.tasktype,callback:function(a){t.$set(t.formData,"tasktype",a)},expression:"formData.tasktype"}},[e("el-option",{attrs:{label:"Flink",value:"Flink"}}),e("el-option",{attrs:{label:"Spark",value:"Spark"}})],1)],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"运行方式",prop:"runtype"}},[e("el-input",{attrs:{clearable:!0,placeholder:"请输入"},model:{value:t.formData.runtype,callback:function(a){t.$set(t.formData,"runtype","string"===typeof a?a.trim():a)},expression:"formData.runtype"}})],1)],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"运行参数",prop:"run_param"}},[e("el-input",{attrs:{clearable:!0,placeholder:"请输入"},model:{value:t.formData.run_param,callback:function(a){t.$set(t.formData,"run_param","string"===typeof a?a.trim():a)},expression:"formData.run_param"}})],1)],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"任务描述",prop:"task_describe"}},[e("el-input",{attrs:{clearable:!0,type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入"},model:{value:t.formData.task_describe,callback:function(a){t.$set(t.formData,"task_describe","string"===typeof a?a.trim():a)},expression:"formData.task_describe"}})],1)],1)],1),e("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"}},[e("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("确定")]),e("el-button",{attrs:{type:"info"},on:{click:t.handleCancel}},[t._v("取消")])],1)],1)],1)}),i=[],r={name:"ChangePassword",data:function(){return{rules:{name:[{required:!0,message:"不能为空",trigger:"blur"}],tasktype:[{required:!0,message:"不能为空",trigger:"blur"}],runtype:[{required:!0,message:"不能为空",trigger:"blur"}]},dialogShow:!1,onClose:null,onSubmit:null,infoTitle:"详细信息",defaultFormData:{id:"",name:"",type:"SQL",tasktype:"Flink",runtype:"yarn-session",run_param:"",sql_text:"",stask_describe:""},formData:null}},created:function(){this.formData=Object.assign({},this.defaultFormData)},methods:{openDialog:function(t){var a=t.formData,e=void 0===a?{}:a,n=t.infoTitle,s=void 0===n?"":n,l=t.onSubmit,i=void 0===l?null:l,r=t.onClose,o=void 0===r?null:r;this.onSubmit=i,this.onClose=o,this.infoTitle=s,this.formData=Object.assign(e,this.defaultFormData),this.dialogShow=!0},handleSubmit:function(){var t=this;this.$refs["infoDialogForm"].validate((function(a){var e;return a?(null===(e=t.onSubmit)||void 0===e||e.call(t,t.formData),t.dialogShow=!1,!0):(t.$message.error("填写异常，请仔细检查"),!1)}))},handleCancel:function(){this.dialogShow=!1},close:function(){var t;null===(t=this.onClose)||void 0===t||t.call(this,this.formData)}}},o=r,c=(e("5a1c"),e("2877")),u=Object(c["a"])(o,l,i,!1,null,"7fbd6074",null),d=u.exports,p=e("8bb3"),f={nmae:"SQLlistManageDevelopment",components:{InfoDialog:d},data:function(){return{sqlDataList:null,searchInput:"",jsonResult:"",sqlText:"",curData:null,dataList:[]}},mounted:function(){var t=this;this.handleSearch().then((function(){t.sqlDataList.length&&t.setCurData(t.sqlDataList[0])}))},methods:{getData:function(){var t=this,a={type:"SQL"};return this.searchInput&&(a["name"]=this.searchInput),Object(p["d"])(a).then((function(a){t.sqlDataList=a.content.data}))},setCurData:function(t){var a=this,e=function(){var e;a.curData=t,a.sqlText=(null===(e=a.curData)||void 0===e?void 0:e.sql_text)||""};this.curData&&this.curData.sql_text!==this.sqlText?this.$confirm("该操作将覆盖当前未保存修改，是否继续","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(t){return e()})):e()},handleSearch:function(){return this.getData()},updateData:function(t){var a=this;Object(p["b"])(t).then((function(){a.$message.success("更新成功"),a.getData()}))},handleUpdate:function(t){this.$refs["InfoDialog"].openDialog({formData:t,infoTitle:"更新",onSubmit:this.updateData})},handleAdd:function(){var t=this;this.$refs["InfoDialog"].openDialog({infoTitle:"新增",onSubmit:function(a){Object(p["a"])(a).then((function(){t.$message.success("更新成功"),t.getData()}))}})},executeData:function(t){var a=this;t=Object.assign({},t,{sql_text:this.sqlText}),Object(p["c"])(t).then((function(t){a.$message.success("运行成功"),a.jsonResult=JSON.stringify(t,null,2)}))}}},m=f,h=(e("119b"),Object(c["a"])(m,n,s,!1,null,"0bb577e3",null));a["default"]=h.exports},"8bb3":function(t,a,e){"use strict";e.d(a,"a",(function(){return s})),e.d(a,"b",(function(){return l})),e.d(a,"c",(function(){return i})),e.d(a,"e",(function(){return r})),e.d(a,"d",(function(){return o}));var n=e("b775");function s(t){return Object(n["a"])({url:"api/devSQL/add",method:"post",data:t})}function l(t){return Object(n["a"])({url:"/api/devSQL/update",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/api/devTask/execute",method:"post",data:t})}function r(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Object(n["a"])({url:"/api/devTask/upload",method:"post",data:t,onUploadProgress:function(t){var e=t.loaded/t.total*100|0;console.log("上传进度：".concat(e,"%")),null===a||void 0===a||a(e)}})}function o(t){return t=Object.assign({type:"SQL"},t||{}),Object(n["a"])({url:"/api/devTask/list",method:"get",params:t})}},d010a:function(t,a,e){}}]);